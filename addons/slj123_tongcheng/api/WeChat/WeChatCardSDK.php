<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator          |
    |              on 2018-07-17 15:19:55              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
 namespace api\WeChat\WeChatCardSDK; defined("\111\x4e\x5f\111\101") || die("\101\x63\x63\x65\163\x73\40\x44\145\156\x69\145\144"); class Sku { public $quantity; public $version = "\62\60\61\x38\345\271\264\x31\xe6\234\210\62\x35\xe6\x97\xa5\x20\x31\66\xe7\202\xb9\x35\x36\345\210\x86"; function __construct($quantity) { $this->quantity = $quantity; } } class Signature { public $data; public $version = "\x32\x30\x31\70\xe5\271\xb4\x31\346\234\x88\x32\x35\346\227\xa5\x20\x31\66\xe7\202\xb9\x35\x36\345\210\206"; function __construct() { $this->data = array(); } public function add_data($str) { array_push($this->data, (string) $str); } public function get_signature() { sort($this->data, SORT_STRING); return sha1(implode($this->data)); } } class DateInfo { public $type; public $begin_timestamp; public $end_timestamp; public $fixed_term; public $version = "\62\x30\61\x38\345\271\xb4\x31\xe6\234\x88\62\x35\xe6\227\xa5\x20\x31\66\xe7\202\271\65\66\345\x88\206"; function __construct($type, $arg0, $arg1 = null) { goto VRgC0; wNUwM: $this->begin_timestamp = $arg0; goto V2XZt; bzXX_: exit("\x44\x61\x74\145\111\x6e\x66\x6f\56\164\x70\x79\145\x20\105\x72\x72\157\x72"); goto YTtfp; YTtfp: goto Q_Scm; goto IBJli; t790I: if ($type == 1) { goto s2XK3; } goto FrNcr; rMtBf: goto Q_Scm; goto t7_mz; FwPH7: (!is_int($arg0) || !is_int($arg1)) && die("\142\145\x67\151\x6e\x5f\x74\151\x6d\145\x73\x74\141\155\160\40\141\x6e\x64\40\x20\145\156\x64\137\x74\151\x6d\145\163\164\x61\155\x70\x20\x6d\165\163\x74\x20\x62\x65\40\151\x6e\x74\145\147\x65\x72"); goto wNUwM; Jf6QP: is_int($arg0) || die("\x66\151\170\145\144\137\x74\x65\162\155\40\155\165\163\x74\40\x62\145\40\151\156\x74\x65\147\145\162"); goto MyAiq; St9T2: Q_Scm: goto QnC5u; mTySm: $this->type = $type; goto t790I; V2XZt: $this->end_timestamp = $arg1; goto rMtBf; FrNcr: if ($type == 2) { goto VJv__; } goto bzXX_; VRgC0: is_int($type) || exit("\104\x61\164\x65\111\156\146\157\56\x74\x79\x70\x65\x20\155\165\163\164\40\x62\x65\40\151\156\x74\145\147\x65\162"); goto mTySm; MyAiq: $this->fixed_term = $arg0; goto St9T2; IBJli: s2XK3: goto FwPH7; t7_mz: VJv__: goto Jf6QP; QnC5u: } } class CardBase { public $base_info; public $version = "\x32\60\61\x38\345\xb9\264\61\xe6\x9c\210\x32\65\xe6\227\245\40\x31\66\347\202\xb9\x35\66\xe5\x88\x86"; public function __construct($base_info) { $this->base_info = $base_info; } } class GeneralCoupon extends CardBase { public $default_detail; public $version = "\x32\60\x31\70\345\271\264\61\346\234\x88\62\65\346\227\xa5\x20\61\66\347\202\271\x35\66\xe5\210\206"; function set_default_detail($default_detail) { $this->default_detail = $default_detail; } } class Groupon extends CardBase { public $deal_detail; public $version = "\62\60\61\x38\345\271\264\x31\346\234\x88\x32\x35\346\227\245\40\61\66\347\x82\xb9\x35\x36\345\210\x86"; function set_deal_detail($deal_detail) { $this->deal_detail = $deal_detail; } } class Discount extends CardBase { public $discount; public $version = "\x32\60\61\x38\xe5\271\xb4\x31\xe6\234\x88\x32\65\xe6\x97\245\40\x31\66\xe7\202\271\65\66\xe5\210\206"; function set_discount($discount) { $this->discount = $discount; } } class Gift extends CardBase { public $gift; public $version = "\x32\x30\61\70\xe5\xb9\264\x31\346\234\x88\62\65\346\x97\xa5\40\x31\x36\347\x82\xb9\x35\66\345\210\206"; function set_gift($gift) { $this->gift = $gift; } } class Cash extends CardBase { public $least_cost; public $reduce_cost; public $version = "\62\60\x31\70\345\271\xb4\61\346\234\x88\x32\x35\xe6\x97\xa5\x20\61\66\xe7\202\xb9\x35\66\xe5\x88\206"; function set_least_cost($least_cost) { $this->least_cost = $least_cost; } function set_reduce_cost($reduce_cost) { $this->reduce_cost = $reduce_cost; } } class MovieTicket extends CardBase { public $detail; public $version = "\x32\60\61\x38\xe5\271\xb4\x31\xe6\234\x88\62\x35\346\x97\245\x20\x31\66\347\x82\xb9\x35\66\345\x88\x86"; function set_detail($detail) { $this->detail = $detail; } } class ScenicTicket extends CardBase { public $ticket_class; public $guide_url; public $version = "\x32\60\61\70\345\271\xb4\x31\346\234\210\62\x35\xe6\227\245\x20\x31\66\347\202\xb9\65\x36\345\x88\x86"; function set_ticket_class($ticket_class) { $this->ticket_class = $ticket_class; } function set_guide_url($guide_url) { $this->guide_url = $guide_url; } } class MemberCard extends CardBase { public $supply_bonus; public $supply_balance; public $bonus_cleared; public $bonus_rules; public $balance_rules; public $prerogative; public $bind_old_card_url; public $activate_url; public $version = "\x32\x30\61\70\xe5\xb9\xb4\x31\xe6\234\210\62\65\346\x97\xa5\x20\61\66\347\202\xb9\65\x36\xe5\210\206"; function set_supply_bonus($supply_bonus) { $this->supply_bonus = $supply_bonus; } function set_supply_balance($supply_balance) { $this->supply_balance = $supply_balance; } function set_bonus_cleared($bonus_cleared) { $this->bonus_cleared = $bonus_cleared; } function set_bonus_rules($bonus_rules) { $this->bonus_rules = $bonus_rules; } function set_balance_rules($balance_rules) { $this->balance_rules = $balance_rules; } function set_prerogative($prerogative) { $this->prerogative = $prerogative; } function set_bind_old_card_url($bind_old_card_url) { $this->bind_old_card_url = $bind_old_card_url; } function set_activate_url($activate_url) { $this->activate_url = $activate_url; } } class BaseInfo { private $Colors = array("\x43\x6f\x6c\x6f\x72\60\61\x30", "\103\x6f\154\x6f\162\60\x32\x30", "\x43\x6f\x6c\157\x72\x30\63\x30", "\x43\x6f\154\x6f\162\x30\64\60", "\x43\x6f\154\157\162\x30\65\x30", "\x43\x6f\154\x6f\x72\60\x36\60", "\x43\x6f\x6c\x6f\x72\60\67\60", "\103\x6f\x6c\x6f\162\60\x38\x30", "\x43\157\154\157\x72\60\70\x31", "\x43\157\154\x6f\x72\x30\70\x32", "\103\x6f\154\157\162\60\71\x30", "\x43\157\154\x6f\162\61\60\60", "\x43\157\154\157\x72\61\60\61", "\x43\157\x6c\157\x72\61\60\x32"); public $logo_url; public $brand_name; public $code_type; public $title; public $color; public $notice; public $service_phone; public $description; public $date_info; public $sku; public $sub_title; public $use_limit; public $get_limit; public $use_custom_code; public $bind_openid; public $can_share; public $location_id_list; public $url_name_type; public $custom_url; public $version = "\62\60\61\x38\345\xb9\xb4\x31\xe6\234\210\62\x35\346\x97\xa5\40\61\x37\347\202\271\62\x36\345\x88\x86"; public static function getAccountToken() { goto gX_Pl; gX_Pl: load()->classs("\x77\170\141\160\160\56\141\143\x63\157\x75\156\164"); goto fgWzc; fgWzc: $wxapp = new \WxappAccount($GLOBALS["\x5f\x57"]["\141\143\x63\157\x75\x6e\x74"]); goto pvwoK; pvwoK: return $wxapp->getAccessToken(); goto L8ocx; L8ocx: } public static function getColors() { return \HttpRequestAPI::ihttp_request("\150\164\x74\160\x73\x3a\57\57\141\x70\151\56\x77\x65\151\x78\151\156\x2e\x71\x71\56\x63\x6f\x6d\57\143\x61\x72\144\x2f\147\x65\x74\143\x6f\154\157\x72\163\x3f\x61\x63\143\x65\x73\x73\x5f\x74\157\x6b\145\x6e\75" . self::getAccountToken()); } function __construct($logo_url, $brand_name, $code_type, $title, $color, $notice, $service_phone, $description, $date_info, $sku) { goto nS2jV; PBRO3: $this->sku = $sku; goto Jlh1b; X5hME: $this->service_phone = $service_phone; goto vtloV; SQ2p7: $this->brand_name = $brand_name; goto Pn1tH; nCQhH: is_int($code_type) || die("\x63\x6f\x64\145\137\164\x79\160\x65\x20\155\165\x73\x74\x20\142\x65\40\x69\x6e\x74\145\147\145\x72"); goto vkbc0; Ry0wm: $this->logo_url = $logo_url; goto SQ2p7; nS2jV: $date_info instanceof DateInfo || die("\144\141\x74\145\x5f\151\156\146\157\x20\x45\x72\162\157\x72"); goto AKAjk; Pn1tH: $this->code_type = $code_type; goto shEEE; vtloV: $this->description = $description; goto xTy5I; AKAjk: $sku instanceof Sku || die("\163\153\165\40\105\x72\x72\x6f\x72"); goto nCQhH; FplXX: $this->color = $color; goto FYQh8; xTy5I: $this->date_info = $date_info; goto PBRO3; shEEE: $this->title = $title; goto FplXX; vkbc0: in_array($color, $this->Colors) || die("\103\157\x6c\157\x72\40\156\x6f\x74\40\x69\x6e\40\x61\x6c\154\x6f\167\x65\x64\x20\x4c\x69\163\164"); goto Ry0wm; FYQh8: $this->notice = $notice; goto X5hME; Jlh1b: } public function set_sub_title($sub_title) { $this->sub_title = $sub_title; } function set_use_limit($use_limit) { is_int($use_limit) || die("\x75\x73\x65\137\154\x69\155\151\x74\x20\x6d\165\x73\x74\40\x62\145\x20\151\156\164\145\147\145\x72"); $this->use_limit = $use_limit; } function set_get_limit($get_limit) { is_int($get_limit) || die("\x67\145\x74\137\x6c\151\x6d\151\x74\x20\155\165\163\x74\40\142\145\40\151\x6e\x74\145\x67\x65\162"); $this->get_limit = $get_limit; } function set_use_custom_code($use_custom_code) { $this->use_custom_code = $use_custom_code; } function set_bind_openid($bind_openid) { $this->bind_openid = $bind_openid; } function set_can_share($can_share) { $this->can_share = $can_share; } function set_location_id_list($location_id_list) { $this->location_id_list = $location_id_list; } function set_url_name_type($url_name_type) { is_int($url_name_type) || die("\x75\162\x6c\x5f\156\x61\x6d\145\137\x74\x79\160\x65\40\x6d\165\163\164\x20\142\145\40\151\x6e\x74"); $this->url_name_type = $url_name_type; } function set_custom_url($custom_url) { $this->custom_url = $custom_url; } } class WeChatCard { private $CARD_TYPE = array("\107\105\x4e\x45\122\101\114\x5f\103\117\125\x50\x4f\x4e", "\107\122\117\125\120\117\116", "\x44\x49\x53\x43\117\125\116\x54", "\x47\111\106\x54", "\103\101\123\110", "\115\105\x4d\x42\x45\x52\x5f\x43\x41\x52\104", "\123\103\x45\x4e\111\x43\137\x54\x49\103\113\x45\x54", "\115\x4f\x56\x49\105\x5f\x54\x49\103\x4b\105\x54"); public $card_type; public $general_coupon; public $groupon; public $discount; public $gift; public $cash; public $member_card; public $scenic_ticket; public $movie_ticket; public $version = "\x32\60\x31\x38\xe5\xb9\264\61\xe6\234\210\62\65\346\227\245\40\61\x37\347\202\271\x32\x38\xe5\x88\206"; function __construct($card_type, $base_info) { goto Wusr3; KQpRW: $base_info instanceof BaseInfo || die("\142\x61\163\145\137\151\156\x66\x6f\x20\105\x72\162\157\162"); goto ZUgtY; WCZWU: switch ($card_type) { case $this->CARD_TYPE[0]: $this->general_coupon = new GeneralCoupon($base_info); goto Wl92V; case $this->CARD_TYPE[1]: $this->groupon = new Groupon($base_info); goto Wl92V; case $this->CARD_TYPE[2]: $this->discount = new Discount($base_info); goto Wl92V; case $this->CARD_TYPE[3]: $this->gift = new Gift($base_info); goto Wl92V; case $this->CARD_TYPE[4]: $this->cash = new Cash($base_info); goto Wl92V; case $this->CARD_TYPE[5]: $this->member_card = new MemberCard($base_info); goto Wl92V; case $this->CARD_TYPE[6]: $this->scenic_ticket = new ScenicTicket($base_info); goto Wl92V; case $this->CARD_TYPE[8]: $this->movie_ticket = new MovieTicket($base_info); goto Wl92V; default: exit("\103\x61\x72\144\x54\x79\160\x65\40\x45\x72\162\x6f\162"); } goto D4jU7; ZUgtY: $this->card_type = $card_type; goto WCZWU; D4jU7: zZkPA: goto Bap9s; LmLO2: return true; goto u5Sxx; Wusr3: in_array($card_type, $this->CARD_TYPE) || die("\103\x61\x72\x64\x54\x79\160\x65\40\x45\162\x72\x6f\x72"); goto KQpRW; Bap9s: Wl92V: goto LmLO2; u5Sxx: } function get_card() { goto DThck; FJiVo: nC5iO: goto FrC7Q; FrC7Q: OzEl3: goto PySV_; DThck: switch ($this->card_type) { case $this->CARD_TYPE[0]: return $this->general_coupon; case $this->CARD_TYPE[1]: return $this->groupon; case $this->CARD_TYPE[2]: return $this->discount; case $this->CARD_TYPE[3]: return $this->gift; case $this->CARD_TYPE[4]: return $this->cash; case $this->CARD_TYPE[5]: return $this->member_card; case $this->CARD_TYPE[6]: return $this->scenic_ticket; case $this->CARD_TYPE[8]: return $this->movie_ticket; default: exit("\107\x65\164\103\x61\x72\x64\40\105\162\x72\157\162"); } goto FJiVo; PySV_: } function toJson() { return "\x7b\40\42\x63\x61\x72\144\42\x3a" . urldecode(json_encode($this)) . "\175"; } } $base_info = new BaseInfo("\x68\164\164\160\72\x2f\57\167\167\167\56\163\165\x70\x61\144\x6d\151\x6e\x2e\143\156\x2f\x75\160\x6c\157\x61\x64\163\57\x61\154\x6c\x69\155\x67\x2f\x31\x32\60\62\x31\66\57\x31\x5f\61\62\60\62\x31\x36\x32\61\x34\x37\62\x35\137\61\x2e\152\160\147", "\xe6\265\267\345\xba\x95\xe6\x8d\x9e", 0, "\61\63\62\345\205\x83\345\217\214\xe4\xba\xba\xe7\201\253\351\x94\x85\xe5\245\x97\351\xa4\220", "\103\x6f\154\x6f\x72\x30\x31\x30", "\344\xbd\277\347\x94\xa8\xe6\x97\266\xe5\x90\x91\xe6\x9c\x8d\xe5\212\xa1\xe5\x91\230\xe5\207\xba\347\xa4\xba\xe6\xad\244\345\x88\270", "\x30\62\x30\55\70\70\x38\x38\70\x38\70\x38", "\xe4\270\x8d\345\217\257\xe4\xb8\216\xe5\x85\xb6\344\273\x96\xe4\xbc\x98\346\203\240\345\x90\214\xe4\272\253\12\40\xe5\xa6\x82\xe9\x9c\200\345\233\xa2\350\xb4\xad\345\x88\xb8\xe5\217\221\xe7\xa5\xa8\xef\274\x8c\xe8\xaf\267\345\234\xa8\xe6\266\x88\350\264\xb9\xe6\x97\xb6\345\x90\221\xe5\x95\206\xe6\210\xb7\xe6\217\220\345\207\xba\12\40\xe5\272\227\xe5\206\x85\xe5\x9d\207\345\x8f\257\xe4\xbd\277\xe7\224\250\xef\274\214\xe4\273\205\xe9\231\x90\xe5\240\x82\351\243\237\12\x20\xe9\244\220\345\211\215\344\270\215\xe5\217\257\346\x89\223\345\x8c\x85\357\274\x8c\351\xa4\220\xe5\x90\216\xe6\234\xaa\345\220\203\345\256\214\xef\xbc\214\xe5\217\xaf\xe6\211\223\345\x8c\205\12\x20\346\234\254\xe5\x9b\xa2\xe8\264\255\xe5\210\xb8\xe4\270\215\xe9\231\x90\xe4\xba\xba\xe6\x95\xb0\357\274\214\xe5\xbb\272\xe8\256\xae\62\xe4\272\272\344\xbd\xbf\xe7\224\250\xef\xbc\214\xe8\266\205\xe8\xbf\207\xe5\273\xba\350\256\256\xe4\xba\xba\xe6\225\xb0\xe9\241\xbb\xe5\x8f\xa6\xe6\224\266\351\x85\261\xe6\x96\x99\xe8\264\xb9\x35\xe5\x85\203\x2f\344\275\215\xa\x20\346\x9c\xac\xe5\x8d\225\350\xb0\xa2\xe7\273\235\xe8\x87\xaa\xe5\270\246\351\x85\x92\346\260\xb4\351\245\256\346\226\x99", new DateInfo(1, 1397577600, 1399910400), new Sku(50000000)); $base_info->set_sub_title(''); $base_info->set_use_limit(1); $base_info->set_get_limit(3); $base_info->set_use_custom_code(false); $base_info->set_bind_openid(false); $base_info->set_can_share(true); $base_info->set_url_name_type(1); $base_info->set_custom_url("\x68\164\x74\x70\72\57\57\167\x77\x77\56\x71\x71\x2e\143\157\x6d"); $card = new WeChatCard("\107\122\117\x55\120\x4f\116", $base_info); $card->get_card()->set_deal_detail("\344\273\245\344\xb8\213\351\224\x85\xe5\272\x95\x32\40\351\x80\x89\61\xef\xbc\210\xe6\234\x89\350\217\214\347\x8e\213\xe9\x94\205\xe3\x80\x81\xe9\xba\273\350\276\xa3\xe9\224\x85\xe3\200\x81\345\xa4\247\351\xaa\xa8\351\x94\x85\343\x80\x81\347\225\252\350\x8c\x84\xe9\224\205\xe3\x80\x81\xe6\xb8\x85\xe8\241\245\xe5\x87\x89\351\224\x85\343\x80\201\xe9\205\xb8\xe8\217\x9c\xe9\xb1\274\xe9\x94\x85\345\x8f\xaf\351\x80\211\357\274\x89\357\274\232\xa\x20\345\xa4\247\xe9\x94\x85\x31\x20\xe4\273\xbd\x31\62\40\345\x85\203\12\x20\xe5\xb0\217\xe9\x94\x85\x32\x20\xe4\273\xbd\x31\x36\x20\345\205\203\xa\x20\344\273\xa5\344\xb8\x8b\xe8\217\234\xe5\223\201\x32\x20\xe9\x80\211\61\12\x20\xe7\211\271\347\xba\xa7\350\202\xa5\xe7\x89\233\x31\x20\344\xbb\275\x33\x30\40\xe5\x85\203\12\40\xe6\264\236\xe5\xba\xad\351\xae\xb0\xe9\xb1\xbc\345\215\267\x31\40\xe4\xbb\275\x32\60\xe5\x85\x83\12\40\345\x85\xb6\xe4\273\x96\xa\xe9\262\234\xe8\x8f\x87\xe7\x8c\252\350\x82\x89\346\xbb\x91\61\x20\xe4\273\275\61\x38\40\345\x85\x83\12\x20\351\207\221\xe9\222\x88\350\217\207\x31\x20\xe4\273\xbd\x31\66\x20\345\x85\x83\12\x20\351\273\221\xe6\234\250\350\200\263\61\40\344\273\275\71\x20\xe5\x85\x83\xa\40\xe5\xa8\x83\345\250\x83\350\217\x9c\61\40\xe4\273\xbd\70\x20\345\205\x83\12\x20\345\206\xac\347\x93\x9c\61\xe4\273\xbd\66\x20\xe5\x85\203\xa\x20\347\x81\xab\xe9\x94\205\351\235\242\x32\40\344\xb8\252\x36\x20\345\205\x83\xa\40\xe6\xac\xa2\xe4\271\x90\347\225\205\351\xa5\xae\62\40\xe4\275\215\x31\62\40\xe5\x85\x83\12\x20\xe8\x87\252\345\212\xa9\xe9\205\xb1\xe6\x96\x99\62\x20\xe4\xbd\x8d\x31\x30\40\xe5\x85\x83"); $signature = new Signature(); $signature->add_data("\70\67\x35\145\x35\143\143\60\71\x34\142\67\x38\146\62\x33\x30\142\x30\x35\x38\70\143\62\x61\x35\146\x33\143\64\x39\x66"); $signature->add_data("\167\x78\65\67\142\x66\x34\66\70\67\x38\x37\61\66\x63\62\x37\x65"); $signature->add_data("\62\x31\63\x31\66\70\x38\60\70"); $signature->add_data("\61\x32\x33\64\x35"); $signature->add_data("\x35\65\x35\x35\x35");